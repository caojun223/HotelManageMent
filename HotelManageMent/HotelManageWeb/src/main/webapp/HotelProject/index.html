<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="author" content="order by dede58.com"/>
    <title>泽龙酒店管理</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="http://www.jd.com/favicon.ico" type="image/x-icon"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="./css/x-admin.css" media="all">
    <!--<script src="https://unpkg.com/vue/dist/vue.js"></script>-->

    <!--<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>-->
    <script src="js/jquery-1.8.3.js"></script>

</head>

<body>
<div class="layui-layout layui-layout-admin">
    <div class="layui-header header header-demo">
        <div class="layui-main">
            <div class="admin-logo-box">
                <a class="logo" href="index.html" title="logo">泽龙酒店管理</a>
                <div class="larry-side-menu">
                    <i class="fa fa-th-large" aria-hidden="false"></i>
                </div>
            </div>

            <ul class="layui-nav" lay-filter="">
                <li class="layui-nav-item">
                    <img src="./images/logo.png" class="layui-circle" style="border: 2px solid #A9B7B7;" width="35px"
                         alt="">
                </li>
                <li class="layui-nav-item">
                    <a href="javascript:;" id="users"></a>
                    <dl class="layui-nav-child">
                        <!-- 二级菜单 -->
                        <dd>
                            <a href="">个人信息</a>
                        </dd>
                        <dd>
                            <a href="">切换帐号</a>
                        </dd>
                        <dd>
                            <a href="#" onclick="tuichu()">退出</a>
                        </dd>
                    </dl>
                </li>
                <li class="layui-nav-item x-index">
                    <a href="">前台首页</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="layui-side layui-bg-black x-side" style="left:-200px;" id="menulist1">
        <div class="layui-side-scroll">
            <ul class="layui-nav layui-nav-tree site-demo-nav" lay-filter="side" id="nav">

            </ul>
        </div>
    </div>
    <div class="layui-tab layui-tab-card site-demo-title x-main" lay-filter="x-tab" lay-allowclose="true"
         style="left: 0px;border-left: solid 2px #2299ee;">
        <ul class="layui-tab-title">
            <li class="layui-this"> 我的桌面 <i class="layui-icon layui-unselect layui-tab-close">ဆ</i></li>
        </ul>
        <div class="layui-tab-content site-demo site-demo-body">
            <div class="layui-tab-item layui-show">
                <iframe frameborder="0" src="./welcome.html" class="x-iframe"></iframe>
            </div>
        </div>
    </div>
    <div class="site-mobile-shade"></div>
</div>

<!--<script src="./lib/layui/lay/dest/layui.all.js" charset="utf-8"></script>-->
<script src="./lib/layui/layui.js" charset="utf-8"></script>
<script src="./js/x-admin.js"></script>

<script type="text/javascript">
var users = sessionStorage.getItem("username");
$("#users").html(users);
var emploteeid = window.location.search.split("=")[1];
    /*var vmm = new Vue({
        el: "#menulist1",
        data: {
            datas: []

        },
        mounted: function () {
            this.showData();
            //需要执行的方法可以在mounted中进行触发，其获取的数据可以赋到data中后，可以放在前面进行渲染
        },
        methods: {
            showData: function () {
                var self=this;
                jQuery.ajax({
                    type: 'Get',
                    url: "getAllMenus",
                    data:{"employeeid":1},
                    datatype: "json",
                    success: function (data) {
                        self.datas=data;
                       console.log(self.datas);
                    }
                })
            }

        }
    });*/

    layui.use('element', function(){
        var element = layui.element();
        element.init();
        //…
    });
    $(function () {
        $.ajax( {
            type: 'Get',
            url: "getAllMenus",
            data: {"employeeid": emploteeid},
            datatype: "json",
            success : function(data) {
                var menu = "";
                for(var i = 0;i<data.length;i++){
                    menu += "<li class='layui-nav-item  '>"
                    if(data[i].parentid == 0){
                        menu += "<a class='javascript:;' href='javascript:;'><cite>"+data[i].menuname+"</cite> </a>"
                        console.log(data[i].menuname);
                        for(var j = 0;j<data[i].menuList.length;j++){
                                menu +=    "<dl class='layui-nav-child'>"
                                menu +=        "<dd>"
                                menu +=            "<a href=\"javascript:;\" _href='"+data[i].menuList[j].menupath+"'> <cite>"+data[i].menuList[j].menuname+"</cite> </a>"
                                menu +=        "</dd>"
                                menu +=    "</dl>"
                            console.log(data[i].menuList[j].menuname);
                            console.log(data[i].menuList[j].menupath)
                        }
                    }
                    menu +=    "</li>";
                }
                $("#nav").html(menu);

            }
        });
    })

    function tuichu() {
        sessionStorage.removeItem("username");
        window.location.href="./login.html";

    }

</script>
</body>
</html>