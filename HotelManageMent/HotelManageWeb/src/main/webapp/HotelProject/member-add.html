<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="author" content="order by dede58.com"/>
    <title>泽龙酒店管理</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="./css/x-admin.css" media="all">
</head>

<body>
<div class="x-body">
    <form class="layui-form">
        <div class="layui-form-item">
            <label for="L_username" class="layui-form-label"> <span class="x-red">*</span>用户名 </label>
            <div class="layui-input-inline">
                <input type="text" id="L_username" name="username" required lay-verify="nikename"
                       autocomplete="off" class="layui-input">
            </div>
            <div class="layui-form-mid layui-word-aux"><span class="x-red">*</span>将会成为您唯一的登入名</div>
        </div>
        <div class="layui-form-item">
            <label for="L_email" class="layui-form-label"> <span class="x-red">*</span>邮箱 </label>
            <div class="layui-input-inline">
                <input type="text" id="L_email" name="email" required lay-verify="email"
                       autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label for="L_pass" class="layui-form-label"> <span class="x-red">*</span>手机号 </label>
            <div class="layui-input-inline">
                <input type="password" id="usertel" name="usertel" required lay-verify="pass"
                       autocomplete="off" class="layui-input"  maxlength="11">
            </div>
        </div>
        <div class="layui-form-item">
            <label for="L_pass" class="layui-form-label"> <span class="x-red">*</span>密码 </label>
            <div class="layui-input-inline">
                <input type="password" id="L_pass" name="pass" required lay-verify="pass"
                       autocomplete="off" class="layui-input">
            </div>
            <div class="layui-form-mid layui-word-aux"> 6到18个字符</div>
        </div>
        <div class="layui-form-item">
            <label for="L_repass" class="layui-form-label"> <span class="x-red">*</span>确认密码 </label>
            <div class="layui-input-inline">
                <input type="password" id="L_repass" name="repass" required lay-verify="repass"
                       autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label for="L_repass" class="layui-form-label"> </label>
            <input class="layui-btn" lay-filter="add" type="button"  value="添加" onclick="addUser()"></input>
        </div>
    </form>
</div>
<script src="./lib/layui/layui.js" charset="utf-8">
</script>
<script src="./js/x-layui.js" charset="utf-8"></script>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script>

    function addUser() {
        var record = new Object();
        record.username=$("#L_username").val();
        record.useremail=$("#L_email").val();
        record.usertel=$("#usertel").val();
        record.userpass=$("#L_pass").val();
        var userpass2=$("#L_repass").val();
        var a = /^1\d{10}$/;
        var re = /^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/;
        if (record.username!=null||record.username!=""){
        if (record.userpass==userpass2){
            if (a.test(record.usertel)){
                    if (re.test(record.useremail)){
                        $.ajax({
                            type:"post",
                            contentType:"application/json;charset=utf-8",
                            async:false,
                            url:"http://localhost:8084/userInsertSelective",
                            data:JSON.stringify(record),
                            success:function (data) {
                                if (data==-1){
                                    alert("用户名已存在");
                                } else {
                                    alert("添加成功");
                                    window.location.href="mamber-list.html";
                                }
                            }
                        });
                    } else {
                     alert("请输入正确邮箱");
                    }
            }else {
                alert("电话号码必须为11位数字");
            }
        }else {
            alert("俩次密码输入不一致");
        }
        }else {
            alert("用户名不能为空");
        }
    }
</script>
</body>
</html>